---
title: 前端框架常见问题
tags: [面试题]
date: 2024-08-12 09:59:22
draft: true
hideInList: false
isTop: false
feature: 
---
## Angular

### Angular变更检测


1. 变更检测机制

- **Zone.js**：Angular 使用 `Zone.js` 来监控异步操作（如事件、HTTP 请求等）。`Zone.js` 会自动触发变更检测，确保在这些操作完成后视图得到更新。
    
- **变更检测周期**：每当发生异步事件（如用户输入、HTTP 响应）时，Angular 会在特定的周期中检查数据是否发生变化。如果数据发生变化，则更新视图。
    
Angular 的变更检测机制会在以下几种情况触发：

- **用户交互**：如点击、输入等。
- **异步操作**：如 HTTP 请求、定时器等。
- **Angular 事件**：如 Angular 的生命周期钩子。
- **应用状态变化**：如服务中的数据更新

2. 变更检测策略

Angular 提供了两种主要的变更检测策略：

1. **Default**（默认策略）：
    
    - **工作方式**：Angular 会在每个异步事件（如点击、输入）之后检查整个组件树的变化。这种策略确保组件总是与最新的数据同步，但可能会导致性能开销，尤其是在大型应用中。
    - **使用方式**：默认情况下，所有组件都使用这种策略。
2. **OnPush**：
    
    - **工作方式**：Angular 仅在以下情况下检查组件的变化：
        - 组件的输入属性（`@Input`）发生变化。
        - 组件中的事件（如用户操作）发生。
        - 组件的可观察对象（Observable）发出新值。


 3. 手动控制变更检测

- **`ChangeDetectorRef`**：
    
    - 允许开发者手动触发变更检测。
    - 方法包括 `detectChanges()` 和 `markForCheck()`。
- **`ApplicationRef`**：

- 允许开发者手动触发整个应用的变更检测。

变更检测流程

1.启动变更检测

每次有异步事件或其他变更触发时，Angular 会启动变更检测周期。这个周期会遍历组件树，从根组件到叶子组件，检查每个组件的绑定数据是否有变化。

2 变更检测的检查

- **每个组件都会进行检查**：Angular 会检查组件的所有绑定数据（输入属性、模板表达式、组件内部的数据等）。
- **变更检测策略**：根据组件的变更检测策略（`Default` 或 `OnPush`），Angular 会决定检查哪些组件和数据。

3 更新视图

- **数据变化**：如果检测到数据变化，Angular 会更新视图，确保用户界面与数据状态一致。
- **最小化视图更新**：Angular 会尽量减少对 DOM 的操作，以提高性能。

性能优化技巧

- **使用 `OnPush` 策略**：减少变更检测的范围，特别是在大型组件树中。
- **使用 `trackBy`**：在 `*ngFor` 中使用 `trackBy` 来优化列表渲染性能。
- **避免复杂的模板表达式**：将复杂的逻辑移到组件类中，以减少模板中的计算开销。

